{% extends "base_blanche.html.twig" %}

{% block prev %}
    <div id="return"><a href="javascript:history.back()">&lt;</a></div>
{% endblock %}


{% block page_content %}
    <div class="row">
        <div class="col-xs-12">
            <h1>Mon panier</h1>
        </div>
    </div>

    <div class="row ListeStyle2">
        <div class="col-xs-4">
            <a href="#" class="IconPanierSelect">Panier</a>
        </div>
        <div class="col-xs-4">
            <a href="#" class="IconRecup">Livraison</a>
        </div>
        <div class="col-xs-4">
            <a href="#" class="IconPaiement">Paiement</a>
        </div>
    </div>

    {% for ligne in panier.lignes %}
        {% set produit = ligne.produit %}
        <div class="row ListeStyle">
            <div class="col-xs-4">
                <div class="Tof"><img src="{{ apiImagePath(produit.photo) }}" alt="..."/></div>
            </div>
            <div class="col-xs-6">
                <div class="Description" style="padding: 0px">
                    <p class="Nom">{{ produit.nom }}</p>
                    <p class="Desc">{{ produit.accroche }}</p>
                </div>
            </div>
            <div class="col-xs-2">
                <div class="Supprimer"><a
                            href="{{ path_for("app.commande.remove_from_cart",{"idProduit":produit.id}) }}"></a></div>
            </div>
            <div class="row">
                <div class="col-xs-7 col-xs-offset-2">
                    <a href="{{ path_for("app.entite.del_to_cart",{"idEntite":entiteId,"idProduit":produit.id}) }}" class="btn btn-primary"><i class="glyphicon glyphicon-minus"></i></a>
                    <span class="Qte">&nbsp;&nbsp;x {{ ligne.qte }}&nbsp;&nbsp;</span>
                    <a href="{{ path_for("app.entite.add_to_cart",{"idEntite":entiteId,"idProduit":produit.id}) }}" class="btn btn-primary"><i class="glyphicon glyphicon-plus"></i></a>
                </div>
                <div class="col-xs-3">
                    <p class="Prix">{{ ligne.prix }} â‚¬</p>
                </div>
            </div>
        </div>
    {% else %}
        <h3>Pas de produits au panier</h3>
    {% endfor %}

    <div class="row">
        <div class="col-xs-6 col-xs-offset-3">
                <p class="Prix text-center">Total {{ panier|total }} &euro;</p>
        </div>
    </div>

    {% if panier.lignes|length >0 %}
        <div class="row">
            <div class="col-xs-12">
                <a href="{{ path_for("app.commande.select_livraison") }}" class="btn btn-vert" id="Rechercher"
                   type="submit" style="margin:30px 0;padding-top: 10px;">Valider mon panier</a>
            </div>
        </div>
    {% endif %}
{% endblock %}
